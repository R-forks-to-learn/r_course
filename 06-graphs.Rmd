# Graphs

By default, it is possible to make a lot of graphs with R without the need of any external
packages. However, in this chapter, we are going to learn how to make graphs using `ggplot2` which
is a very powerful package that produces amazing graphs. There is an entry cost to `ggplot2` as it
works in a very different way than what you would expect. But the resulting graphs are well worth
the effort.

## ggplot2

Resources: [R Graphics Cookbook](http://www.cookbook-r.com/Graphs/)

[Tufte in R](http://motioninsocial.com/tufte/)

[ggplot2 extensions](http://www.ggplot2-exts.org/gallery/)

[R graph gallery](http://www.r-graph-gallery.com/portfolio/ggplot2-package/)

[ggthemes Vignette](https://cran.r-project.org/web/packages/ggthemes/vignettes/ggthemes.html)

### Barplots

```{r}
library(ggplot2)
library(ggthemes)
```

```{r}
ggplot(starwars, aes(gender)) +
  geom_bar()
```

### Density

```{r}
ggplot(starwars, aes(height)) +
  geom_density()
```

```{r}
starwars %>%
  filter(gender %in% c("female", "male")) %>%
  ggplot(aes(height, fill = gender)) +
  geom_density()
```

```{r}
starwars %>%
  filter(gender %in% c("female", "male")) %>%
  ggplot(aes(height, fill = gender)) +
  geom_density(alpha = 0.5)
```

### Line plots

```{r}
unemp_lux_data = import("datasets/unemployment/all/unemployment_lux_all.csv")

unemp_lux_data %>%
  filter(division == "Luxembourg") %>%
  ggplot(aes(year, unemployment_rate_in_percent, group = 1)) +
  geom_line()
```


```{r}
unemp_lux_data %>%
  filter(division == "Luxembourg" | division == "Esch-sur-Alzette") %>%
  ggplot(aes(year, unemployment_rate_in_percent, group = division, color = division)) +
  geom_line()
```

```{r}
unemp_lux_data %>%
  filter(division == "Luxembourg" | division == "Esch-sur-Alzette") %>%
  ggplot(aes(year, unemployment_rate_in_percent, group = division, color = division)) +
  theme(legend.position = "bottom") + 
  labs(title="Unemployment in Luxembourg and Esch/Alzette", x="Year", y = "Rate")+
  geom_line()
```

```{r}
unemp_lux_data %>%
  filter(division == "Luxembourg" | division == "Esch-sur-Alzette") %>%
  ggplot(aes(year, unemployment_rate_in_percent, group = division, color = division)) +
    theme_stata() + 
    theme(legend.position = "bottom") + 
  labs(title="Unemployment in Luxembourg and Esch/Alzette", x="Year", y = "Rate") +
  geom_line()
```

```{r}
unemp_lux_data %>%
  filter(division == "Luxembourg" | division == "Esch-sur-Alzette") %>%
  ggplot(aes(year, unemployment_rate_in_percent, group = division, color = division)) +
  theme_minimal() + 
  scale_color_hc() + 
  theme(legend.position = "bottom", legend.title = element_blank()) + 
  labs(title="Unemployment in Luxembourg and Esch/Alzette", x = "Year", y = "Rate") +
  geom_line()
```